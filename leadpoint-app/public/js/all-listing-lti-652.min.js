ExitPop=Class.extend({init:function(e){this.exitPopContainerId=void 0!==e.exitPopContainerId?e.exitPopContainerId:"",this.EXIT_POP_COOKIE_NAME="continueBtnClick",this.initExitPopCookie(),this.formContainerParentElement=void 0!==e.formContainerParentElement?e.formContainerParentElement:"",this.formContainerElement=void 0!==e.formContainerElement?e.formContainerElement:"",this.popMessage=void 0!==e.popMessage?e.popMessage:"Do you want to leave the page?",this.showHeader=void 0!==e.showHeader&&e.showHeader,this.headerId=void 0!==e.headerId?e.headerId:"headerText",self.exitPop=this,this.AddOnClickEventToLinks(),$(window).on("beforeunload",self.exitPop.closeWindow)},initExitPopCookie:function(){"true"==this.getCookie("poor_redirect")&&null!=this.getCookie("poor_redirect")||this.setCookie(this.EXIT_POP_COOKIE_NAME,"false")},appendToBody:function(e){$(this.formContainerParentElement).append(e),$("#"+this.exitPopContainerId).hide()},closeWindow:function(){var e=self.exitPop.getCookie(self.exitPop.EXIT_POP_COOKIE_NAME);if("true"!=e)return $(self.exitPop.formContainerElement).remove(),$("#"+self.exitPop.exitPopContainerId).show(),self.exitPop.showHideHeader(),self.exitPop.setCookie(self.exitPop.EXIT_POP_COOKIE_NAME,"true"),self.exitPop.popMessage},setCookie:function(e,t){document.cookie=e+"="+t},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""},AddOnClickEventToLinks:function(){$("link").on("click",self.exitPop.submitButtonClick);for(var e=document.getElementsByTagName("form"),t=0;t<e.length;t++)$(e[t]).attr("onsubmit","self.exitPop.submitButtonClick()")},hasAdvertorialLinkOut:function(e){var t=e.indexOf("ADVERTORIAL_SIBLING");return t>=0?"true":"false"},submitButtonClick:function(){self.exitPop.setCookie(self.exitPop.EXIT_POP_COOKIE_NAME,"true")},showHideHeader:function(){this.showHeader===!1&&$("#"+this.headerId).hide()}});
function loadScripts(i,s){if(i.length>0){var t=document.createElement("script");t.src=i[0],document.getElementsByTagName("head")[0].appendChild(t),i.shift(),self.loadScripts.callBack=s,self.loadScripts.scripts=i,t.onload=function(){loadScripts(self.loadScripts.scripts,self.loadScripts.callBack)}}else s()}ListingExitPop=ExitPop.extend({init:function(i){this._super(i),this.listingParentId=void 0!==i.exitPopContainerId?i.exitPopContainerId:"clicksnet_listing_1",this.scriptArray=void 0!==i.additionalScripts?i.additionalScripts:[],this.affcid=void 0!==i.affcId?i.affcId:"",this.key=void 0!==i.key?i.key:"",this.zip=document.getElementById(void 0!==i.zipId?i.zipId:"ZIP").value,this.clicksnet_credit_rating=void 0!==i.clicksnetCreditRating?i.clicksnetLoanRange:"",this.clicksnet_loan_range=void 0!==i.clicksnetLoanRange?i.clicksnetLoanRange:"",this.clicksnet_loan_type_term=void 0!==i.clicksnetLoanTypeTerm?i.clicksnetLoanTypeTerm:"",this.subid1=void 0!==i.subId1?i.subId1:"",this.subid2=void 0!==i.subId2?i.subId2:"",this.showHeader=void 0!==i.showHeader?i.showHeader:"false",this.showWidget=void 0!==i.showWidget?i.showWidget:"false",this.showFooter=void 0!==i.showFooter?i.showFooter:"false",this.baseQuery="",this.clicksnet_script_src="",this.loadScript()},loadScript:function(){self.listings=this,loadScripts(this.scriptArray,this.initializeList)},clicksNetGetProtocol:function(){var i=location.href.substring(0,location.href.indexOf("://"));return i="https"!=i?"http://":"https://"},initializeList:function(){self.listings.baseQuery=self.listings.clicksNetGetProtocol()+"cdn.fcmrktplace.com/listing/?affcamid="+self.listings.affcid+"&key="+self.listings.key+"&subid1="+self.listings.subid1+"&subid2="+self.listings.subid2,self.listings.clicksnet_script_src=self.listings.baseQuery+"&zip="+self.listings.zip+"&clicksnet_credit_rating="+self.listings.clicksnet_credit_rating+"&clicksnet_loan_range="+self.listings.clicksnet_loan_range+"&clicksnet_loan_type_term="+self.listings.clicksnet_loan_type_term+"&showHeader="+self.listings.showHeader+"&showWidget="+self.listings.showWidget+"&showFooter="+self.listings.showFooter+"&gh=true&ghs=true",self.listings.fetchListings()},clicksnet_callback:function(data){eval(data),clicksnet_listing.innerHTML=clicksnet_listing_content.content,clicksNetAddExpandButtonListeners(),this.setListing()},fetchListings:function(){var i=({baseQuery:self.listings.baseQuery,zip:self.listings.zip,clicksnet_credit_rating:self.listings.clicksnet_credit_rating,clicksnet_loan_range:self.listings.clicksnet_loan_range,clicksnet_loan_type_term:self.listings.clicksnet_loan_type_term},i||0);i+=1;var s="clicksnet_listing_"+i;$("body").append('<div id="'+s+'"></div>');var t=document.createElement("script");clicksnet_listing=document.getElementById(s),clicksnet_listing.appendChild(t),$.ajax({url:self.listings.clicksnet_script_src,data:"JSON",method:"GET",success:function(i){self.listings.clicksnet_callback(i)}})},setListing:function(){var i=$("#"+this.listingParentId);this.appendToBody(i)}});
IframeExitPop=ExitPop.extend({init:function(i){this._super(i),this.iframeSrc=void 0!==i.iframeSrc?i.iframeSrc:"",this.iframeParentId=void 0!==i.exitPopContainerId?i.exitPopContainerId:"iframe-container",this.scriptArray=void 0!==i.additionalScripts?i.additionalScripts:[],this.loadScript()},loadScript:function(){self.iframe=this,loadScripts(this.scriptArray,this.setIframe)},setIframe:function(){var i="<iframe width='800px' scrolling='no' frameborder='0' height='auto' src='"+self.iframe.iframeSrc+"'></iframe>",r="<script type='text/javascript'> iFrameResize({checkOrigin:false}) </script>";self.iframe.appendToBody("<div id='"+self.iframe.iframeParentId+"' style='display:none;'>"+i+"</div>"),self.iframe.appendToBody(r)}});
ExitPopTypes={IFRAME:"IFRAME",INLINE_LISTING:"INLINE_LISTING",EXIT_INTENT_MODAL:"EXIT_INTENT_MODAL",EXIT_INTENT_MODAL_LISTING:"EXIT_INTENT_MODAL_LISTING"},listingPopConfig={exitPopContainerId:"clicksnet_listing_1",additionalScripts:["https://cdn.fcmrktplace.com/scripts/clicksnet.js","https://cdn.fcmrktplace.com/scripts/clicksnet_mortgage.js"],affcId:"1080350",key:"EraGMJwdHz41",zipId:"ZIP",formContainerParentElement:$(".form-box"),formContainerElement:$(".form-bottom"),showHeader:!1,headerId:"headerText",popMessage:"The message goes here"};var iframeURL="https://widgets.informars.com/Mortgage.aspx?pubid=b263d4c7ef37b38d&size=auto&fha=1&headerbgcolor=383838";iframePopConfig={exitPopContainerId:"iframe-container",iframeSrc:iframeURL,additionalScripts:["https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.5/iframeResizer.min.js","https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.5/iframeResizer.contentWindow.min.js"],formContainerParentElement:$(".form-box"),formContainerElement:$(".form-bottom"),showHeader:!1,headerId:"headerText",popMessage:"The message goes here"},exitIntentConfig={modalContainerId:"modal",modalParentClass:"popup",isModal:!0,isDraggable:!1,autoOpen:!1,buttonElements:[{id:"close-modal-btn",class:"close-modal-btn",label:"Find Low Rates",click:function(){$("#"+self.intentModal.modalContainerId).dialog("close")}},{id:"close-browser-btn",class:"close-browser-btn",label:"You Are Fine With Your Rates",click:function(){$("#"+self.intentModal.modalContainerId).dialog("close")}}],popMessage:"Do you want to leave this site?"},listingExitIntentConfig={modalContainerId:"modal",modalParentClass:"popup",isModal:!0,isDraggable:!1,autoOpen:!1,buttonElements:[{id:"close-modal-btn",class:"close-modal-btn",label:"Find Low Rates",click:function(){$("#"+self.intentModal.modalContainerId).dialog("close")}},{id:"close-browser-btn",class:"close-browser-btn",label:"You Are Fine With Your Rates",click:function(){modalListing.showListing(),$("#"+self.intentModal.modalContainerId).dialog("close")}}],popMessage:"Do you want to leave this site?"},Mediator=Class.extend({init:function(e,i){ExitPopTypes.IFRAME===e?(i||(void 0!=typeof context&&void 0!=context.fieldValues.STATE&&(iframePopConfig.iframeSrc=iframeURL+"&state="+context.fieldValues.STATE),i=iframePopConfig),this.initIframe(i)):ExitPopTypes.INLINE_LISTING===e?(i||(i=listingPopConfig),this.initListing(i)):ExitPopTypes.EXIT_INTENT_MODAL===e?(i||(i=exitIntentConfig),this.initModal(i)):ExitPopTypes.EXIT_INTENT_MODAL_LISTING===e&&(i||(i=listingExitIntentConfig),this.initListingModal(i))},initListing:function(e){listing=new ListingExitPop(e)},initIframe:function(e){iframe=new IframeExitPop(e)},initModal:function(e){modal=new ExitIntentModal(e)},initListingModal:function(e){modalListing=new ModalListingExitPop(listingPopConfig),modal=new ExitIntentModal(e)}});